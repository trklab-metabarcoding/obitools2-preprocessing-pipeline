---
title: "Step1_environment_setup"
author: "T. Divoll"
date: "2023-09-12"
output: 
  html_document:
  df_print: paged
  toc: true
---
### Environment Setup

```{r setup, include=FALSE}
# set global chunk parameters here
knitr::opts_chunk$set(echo = TRUE)
```

```{r include=FALSE}
if (!require("pacman")) install.packages("pacman")
if (!require("BiocManager", quietly = TRUE))
pacman::p_load(here, tidyverse, readxl, stringr, Biostrings)
here::i_am("Step1_env_setup.Rmd")
```

#### Set up standard path variables
Update the `samples_path` to `here(today, "data")` if using your own data and the `sample_sheet` to `here("sample_sheet.xlsx"). Also reduce the from path in the file copy (line 39) to just ``from=here("data")``. Similarly, reduce the from path in the file copy (line 40) to just ``from=here("sample_sheet.xlsx")``.
```{r}
today <- Sys.Date()
dir.create(here(today))
src_path <- file.path(here(today, "src"))
samples_path <- file.path(here(today, "data/test_data"))
output_path <- file.path(here(today, "results"))
merged_path <- file.path(here(today, "results/merged"))
controls_path <- file.path(here(today, "results/control_samples"))
sample_sheet <- read_xlsx(here("sample_sheet_test.xlsx"), col_types = "guess")
dir.create(output_path)
dir.create(merged_path)
dir.create(controls_path)
file.copy(from=here("template/src"), to=here(today), recursive=TRUE)
file.copy(from=here("template/test_data"), to=here(today), recursive=TRUE)
file.copy(from=here("sample_sheet_test.xlsx"), to=here(today))

## make environment variables that can be passed to bash code chunks
Sys.setenv(samples_dir=samples_path)
Sys.setenv(output_dir=output_path)
Sys.setenv(merged_dir=merged_path)
Sys.setenv(src_dir=src_path)
```
